# issue-2025-03-30-0004

We need to understand what kind of failure(s) happened here. BEFORE FIXING, we must reproduce in an integration and/or unit test.

Also, we MUST never init over an existing acdm.toml without user prompt or `--force`.

```bash
me@redacted:/Users/me/src$ mkdir mock-repo
me@redacted:/Users/me/src$ cd mock-repo/
me@redacted:/Users/me/src/mock-repo$ git init
Initialized empty Git repository in /Users/me/src/mock-repo/.git/
me@redacted:/Users/me/src/mock-repo$ vim acdm.toml
me@redacted:/Users/me/src/mock-repo$ cat acdm.toml
[[sources]]
repo = "git@github.com:modelcontextprotocol/specification.git"
name = "mcp-specification"
rev = "main"
type = "git"
sparse_paths = [
    "docs/specification/2025-03-26/**",
    "schema/2025-03-26/**",
]
target = "vendor/mcp-specification"
[[sources]]
me@redacted:/Users/me/src/mock-repo$ acdm update
[2025-03-30T17:26:30.250Z DEBUG acdm::cli acdm::cli] Starting acdm with config path: acdm.toml
[2025-03-30T17:26:30.251Z INFO  acdm::cli::commands::update acdm::cli::commands::update] Updating all dependencies
[2025-03-30T17:26:30.251Z DEBUG acdm::cli::commands::update acdm::cli::commands::update] Using config file: acdm.toml
[2025-03-30T17:26:30.251Z DEBUG acdm::cli::commands::update acdm::cli::commands::update] Force mode: false
[2025-03-30T17:26:30.251Z DEBUG acdm::interfaces::cli acdm::interfaces::cli] Updating dependencies: None, commit_message: None, force: false
[2025-03-30T17:26:30.251Z DEBUG acdm::interfaces::cli acdm::interfaces::cli] Verifying Git repository status for path:
[2025-03-30T17:26:30.253Z WARN  acdm::interfaces::cli acdm::interfaces::cli] Git repository status is not clean: Git operation failed: Failed to check if path is a git repository: No such file or directory (os error 2)
[2025-03-30T17:26:30.253Z ERROR acdm acdm] Error: Git operation failed: Failed to check if path is a git repository: No such file or directory (os error 2)
Error: Git operation failed: Failed to check if path is a git repository: No such file or directory (os error 2)
me@redacted:/Users/me/src/mock-repo$ tree --gitignore
.
└── acdm.toml

1 directory, 1 file
me@redacted:/Users/me/src/mock-repo$ ls
acdm.toml
me@redacted:/Users/me/src/mock-repo$ git init
Reinitialized existing Git repository in /Users/me/src/mock-repo/.git/
me@redacted:/Users/me/src/mock-repo$ ls
acdm.toml
me@redacted:/Users/me/src/mock-repo$ acdm init
[2025-03-30T17:26:57.535Z DEBUG acdm::cli acdm::cli] Starting acdm with config path: acdm.toml
[2025-03-30T17:26:57.535Z INFO  acdm::cli::commands::init acdm::cli::commands::init] Initializing new configuration at acdm.toml
[2025-03-30T17:26:57.535Z DEBUG acdm::cli::commands::init acdm::cli::commands::init] Force mode: false
[2025-03-30T17:26:57.535Z DEBUG acdm::interfaces::cli acdm::interfaces::cli] Initializing configuration with default location: None
[2025-03-30T17:26:57.536Z INFO  acdm::cli::commands::init acdm::cli::commands::init] Configuration initialized successfully
me@redacted:/Users/me/src/mock-repo$ ls -al
total 8
drwxr-xr-x@   4 me  staff   128 Mar 30 13:26 .
drwxr-xr-x  112 me  staff  3584 Mar 30 13:26 ..
drwxr-xr-x@   9 me  staff   288 Mar 30 13:26 .git
-rw-r--r--@   1 me  staff    13 Mar 30 13:26 acdm.toml
me@redacted:/Users/me/src/mock-repo$ cat acdm.toml
sources = []
me@redacted:/Users/me/src/mock-repo$ vim acdm.toml
me@redacted:/Users/me/src/mock-repo$ acdm update
[2025-03-30T17:27:32.799Z DEBUG acdm::cli acdm::cli] Starting acdm with config path: acdm.toml
[2025-03-30T17:27:32.799Z INFO  acdm::cli::commands::update acdm::cli::commands::update] Updating all dependencies
[2025-03-30T17:27:32.799Z DEBUG acdm::cli::commands::update acdm::cli::commands::update] Using config file: acdm.toml
[2025-03-30T17:27:32.799Z DEBUG acdm::cli::commands::update acdm::cli::commands::update] Force mode: false
[2025-03-30T17:27:32.799Z DEBUG acdm::interfaces::cli acdm::interfaces::cli] Updating dependencies: None, commit_message: None, force: false
[2025-03-30T17:27:32.799Z DEBUG acdm::interfaces::cli acdm::interfaces::cli] Verifying Git repository status for path:
[2025-03-30T17:27:32.801Z WARN  acdm::interfaces::cli acdm::interfaces::cli] Git repository status is not clean: Git operation failed: Failed to check if path is a git repository: No such file or directory (os error 2)
[2025-03-30T17:27:32.801Z ERROR acdm acdm] Error: Git operation failed: Failed to check if path is a git repository: No such file or directory (os error 2)
Error: Git operation failed: Failed to check if path is a git repository: No such file or directory (os error 2)
me@redacted:/Users/me/src/mock-repo$ acdm status
[2025-03-30T17:27:37.348Z DEBUG acdm::cli acdm::cli] Starting acdm with config path: acdm.toml
[2025-03-30T17:27:37.348Z INFO  acdm::cli::commands::status acdm::cli::commands::status] Displaying dependency status
Dependencies:
  - mcp-specification: Not fetched
me@redacted:/Users/me/src/mock-repo$ tree --gitignore
.
└── acdm.toml

1 directory, 1 file
me@redacted:/Users/me/src/mock-repo$
```
